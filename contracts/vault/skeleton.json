{
    "name": "Vault",
    "specification": "file:spec.md",
    "properties": {
        "cancel-not-revert": "a transaction `cancel()` does not abort if the signer uses the recovery key, and the state is REQ.",
        "cancel-revert": "a transaction `cancel()` aborts if the signer uses a key different from the recovery key, or the state is not REQ.",
        "finalize-assets-transfer": "after a successful `finalize()`, exactly amount units of T pass from the control of the contract to that of the receiver.",
        "finalize-before-deadline-revert": "a `finalize()` transaction called immediately after a successful `withdraw()` aborts if sent before wait_time units have elapsed since the `withdraw()`.",
        "finalize-not-revert": "a transaction `finalize()` aborts if the sender is not the owner, or if the state is not REQ, or wait_time has not passed after request_time.",
        "finalice-or-cancel-twice-revert": "a `finalize()` or `cancel()` transaction aborts if performed immediately after another `finalize()` or `cancel()`.",
        "finalize-revert": "a transaction `finalize()` aborts if the sender is not the owner, or if the state is not REQ, or wait_time has not passed after request_time.",
        "keys-distinct": "the owner key and the recovery key are distinct.",
        "keys-invariant-inter": "in any blockchain state, the owner key and the recovery key cannot be changed after the contract is deployed.",
        "keys-invariant-intra": "during the execution of a transaction, the owner key and the recovery key cannot be changed after the contract is deployed.",
        "receive-not-revert": "anyone can always send tokens to the contract",
        "state-idle-req-inter": "in any blockchain state, the vault state is IDLE or REQ",
        "state-idle-req-intra": "during the execution of a transaction, the vault state is always IDLE or REQ.",
        "state-req-amount-consistent": "if the state is REQ, then the amount to be withdrawn is less than or equal to the contract balance.",
        "state-update": "the contract implements a state machine with transitions: s -> s upon a receive (for any s), IDLE -> REQ upon a withdraw, REQ -> IDLE upon a finalize or a cancel.",
        "withdraw-finalize-not-revert": "a `finalize()` transaction called immediately after a successful `withdraw()` does not abort if sent after wait_time units have elapsed.",
        "withdraw-revert": "a transaction `withdraw(amount)` does not abort if amount is less than or equal to the contract balance, the sender is the owner, and the state is IDLE",
        "okey-rkey-private-wd": "if an actor holds both the owner and recovery key, and no one else knows the recovery key, the former is able to eventually withdraw all the contract balance with probability 1 (for every fair trace).",
        "rkey-no-wd": "if an actor holds the recovery key, they can always prevent other actors from withdrawing funds from the contract",
        "wd-fin-before": "after a successful `withdraw`, `finalize` cannot be successfully called before `wait_time` blocks have elapsed, with no in-between calls.",
        "wd-fin-before-interleave": "after a successful `withdraw`, `finalize` cannot be successfully called before `wait_time` blocks have elapsed, possibly with in-between calls.",
        "wd-fin-revert": "calling `withdraw` or `finalize` with a key different from the owner key, reverts.",
        "wd-twice": "`withdraw` cannot be called twice in a row."
    }
}
